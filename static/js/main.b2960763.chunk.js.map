{"version":3,"sources":["MovieCard.js","MovieDetails.js","App.js","data/demo.js","index.js"],"names":["MovieCard","props","onMouseMove","event","img","currentTarget","childNodes","rect","getBoundingClientRect","relX","clientX","left","right","relY","clientY","top","bottom","width","height","v2","vRot","cross","rotAmount","sqrt","style","transform","onMouseEnter","target","perspective","zIndex","onMouseLeave","$","state","overlay","show","onOverlayEnter","overlayTimeout","setTimeout","hide","setState","onOverlayLeave","clearTimeout","thumb","this","Card","className","color","onClick","CardImg","src","CardTitle","title","React","Component","MovieDetails","art","position","overflow","overflowX","textAlign","App","resizedWindow","showMovieDetails","showDetails","showDetailsAfter","window","addEventListener","callback","movies","i","push","id","summary","images","getMovies","removeEventListener","moviesPerRow","eq","each","idx","getMoviesPerRow","Math","min","floor","length","pos","scrollTo","behavior","html","forEach","movie","key","selectMovie","justifyContent","renderMovies","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b2960763.chunk.js","sourcesContent":["import React from 'react';\r\nimport $ from 'jquery';\r\nimport {\r\n  Card, CardImg, CardTitle\r\n} from 'reactstrap';\r\nimport {cross, sqrt} from 'mathjs';\r\nimport './MovieCard.css';\r\n\r\n\r\nclass MovieCard extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  onMouseMove = (event) => {\r\n    let target = event.currentTarget;\r\n    let img = target.childNodes[0];\r\n    let rect = img.getBoundingClientRect();\r\n    let relX = event.clientX - (rect.left + rect.right)/2;\r\n    let relY = event.clientY - (rect.top + rect.bottom)/2;\r\n    let width = rect.left - rect.right;\r\n    let height = rect.top - rect.bottom;\r\n    let v1 = [0, 0, 1];\r\n    let v2 = [-relX, -relY, 600];\r\n    let vRot = cross(v1, v2);\r\n    let rotAmount = sqrt(relX * relX + relY * relY) / sqrt(width * width + height * height);\r\n    img.style.transform = `rotate3d(${vRot[0]}, ${vRot[1]}, ${vRot[2]}, -${rotAmount*45}deg)`;\r\n  }\r\n\r\n  onMouseEnter = (event) => {\r\n    let target = event.currentTarget;\r\n    target.style.perspective = \"500px\";\r\n    target.style.zIndex = 1;\r\n  }\r\n\r\n  onMouseLeave = (event) => {\r\n    let target = event.currentTarget;\r\n    let img = target.childNodes[0];\r\n    target.style.perspective = \"\";\r\n    target.style.zIndex = 0;\r\n    img.style.transform = \"\";\r\n    $(this.state.overlay).show();\r\n  }\r\n\r\n  onOverlayEnter = (event) => {\r\n    let target = event.currentTarget;\r\n    let overlayTimeout = setTimeout(() => {\r\n      $(target).hide();\r\n    }, 2000);\r\n    this.setState({overlay: target, overlayTimeout: overlayTimeout});\r\n  }\r\n\r\n  onOverlayLeave = (event) => {\r\n    clearTimeout(this.state.overlayTimeout);\r\n  }\r\n\r\n  render() {\r\n    let thumb = this.props.thumb;\r\n    return (\r\n        <Card className=\"movie-card\" color=\"dark\" onClick={this.props.onClick}>\r\n            <div className=\"poster-placeholder\">\r\n                <div className=\"poster-container\" onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onMouseMove={this.onMouseMove}>\r\n                    <CardImg className=\"movie-poster\" src={thumb}></CardImg>\r\n                </div>\r\n            </div>\r\n            <div className=\"poster-overlay\" onMouseEnter={this.onOverlayEnter} onMouseLeave={this.onOverlayLeave}>\r\n              <div className=\"progress-bar\"></div>\r\n            </div>\r\n            <CardTitle className=\"text-light\" style={{width: \"200px\", height: \"30px\"}}>{this.props.title}</CardTitle>\r\n        </Card>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MovieCard;\r\n","import React from 'react';\r\nimport './MovieDetails.css';\r\n\r\n\r\nclass MovieDetails extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n render() {\r\n    let thumb = this.props.thumb;\r\n    let art = this.props.art;\r\n    return(\r\n      <div className=\"movie-details\">\r\n        <img src={art} className=\"movie-details-background\"></img>\r\n        <div style={{position: \"relative\", height: \"50vh\", overflow: \"hidden\"}}>\r\n          <img src={thumb} className=\"movie-details-poster\"></img>\r\n          <div style={{overflow: \"auto\", overflowX: \"hidden\", height: \"50vh\"}}>\r\n            <h1 style={{color: \"white\", textAlign: \"left\"}}>{this.props.title}</h1>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MovieDetails;\r\n","import React from 'react';\nimport $ from 'jquery';\nimport './App.css';\nimport MovieCard from \"./MovieCard\";\nimport MovieDetails from \"./MovieDetails\";\n// import getMovies from './data/plex';\nimport getMovies from './data/demo';\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showDetails: -1,\n      showDetailsAfter: -1\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.resizedWindow);\n    getMovies((movies) => this.setState({movies: movies}));\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.resizedWindow);\n  }\n\n  resizedWindow = () => {\n    this.showMovieDetails(this.state.showDetails);\n  }\n\n  getMoviesPerRow() {\n    let moviesPerRow = -1;\n    let firstMovie = $('.movie-card').eq(0);\n    let top = firstMovie.position().top;\n    $('.movie-card').each(function(idx) {\n      if($(this).position().top !== top) {\n        moviesPerRow = idx;\n        return false;\n      }\n    });\n    return moviesPerRow;\n  }\n\n  showMovieDetails(idx) {\n    let moviesPerRow = this.getMoviesPerRow();\n    let showDetailsAfter = Math.min((Math.floor(idx/moviesPerRow) + 1)*moviesPerRow-1, this.state.movies.length - 1);\n    this.setState({showDetails: idx, showDetailsAfter: showDetailsAfter});\n  }\n\n  selectMovie(event, idx) {\n    if(idx === this.state.showDetails) {\n      this.setState({showDetails: -1, showDetailsAfter: -1});\n      return;\n    }\n    let target = event.currentTarget;\n    setTimeout(()=>{\n      let pos = $(target).position();\n      window.scrollTo({\n        left: pos.left,\n        top: pos.top,\n        behavior: 'smooth'\n      });\n    }, 250);\n    this.showMovieDetails(idx);\n  }\n\n  renderMovies() {\n    let html = [];\n    if(!this.state.movies) {\n      return html;\n    }\n    this.state.movies.forEach((movie, idx) => {\n      html.push(\n        <MovieCard key={movie.id} title={movie.title} thumb={movie.images.thumb} onClick={(event)=>{this.selectMovie(event, idx)}}></MovieCard>\n      );\n      if(idx === this.state.showDetailsAfter) {\n        let movie = this.state.movies[this.state.showDetails];\n        html.push(\n          <MovieDetails key={\"details\"+idx} title={movie.title} thumb={movie.images.thumb} art={movie.images.art}></MovieDetails>\n        );\n      }\n    });\n    return <div className=\"d-flex flex-wrap\" style={{justifyContent: \"center\"}}>\n        {html}\n      </div>\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        {this.renderMovies()}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","export default function(callback) {\r\n    let movies = [];\r\n    for(let i = 0; i < 50; i++){\r\n      movies.push({\r\n        id: i,\r\n        title: `CARD ${i}`,\r\n        summary: `Details ${i}`,\r\n        images: {\r\n            thumb: 'http://via.placeholder.com/400x650',\r\n            art: 'http://via.placeholder.com/1920x1080'\r\n        }\r\n      });\r\n    }\r\n    callback(movies);\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App/>, document.getElementById('root'));\n"],"sourceRoot":""}